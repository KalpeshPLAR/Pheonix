"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["discussions"],{48858:(t,e,i)=>{let o;i.d(e,{e:()=>function t(e,i,r){let a;let l=new AbortController,u=null!=r?r:l.signal;e.setAttribute("data-focus-trap","active");let c=document.createElement("span");c.setAttribute("class","sentinel"),c.setAttribute("tabindex","0"),c.setAttribute("aria-hidden","true"),c.onfocus=()=>{let t=(0,n.O)(e,!0);null==t||t.focus()};let d=document.createElement("span");function h(t){if(t instanceof HTMLElement&&document.contains(e)){if(e.contains(t)){a=t;return}if(a&&(0,n.Wq)(a)&&e.contains(a)){a.focus();return}if(i&&e.contains(i)){i.focus();return}{let t=(0,n.O)(e);null==t||t.focus();return}}}d.setAttribute("class","sentinel"),d.setAttribute("tabindex","0"),d.setAttribute("aria-hidden","true"),d.onfocus=()=>{let t=(0,n.O)(e);null==t||t.focus()},e.prepend(c),e.append(d);let p=function(t){let e=new AbortController;return t.addEventListener("abort",()=>{e.abort()}),e}(u);if(o){let t=o;o.container.setAttribute("data-focus-trap","suspended"),o.controller.abort(),s.push(t)}p.signal.addEventListener("abort",()=>{o=void 0}),u.addEventListener("abort",()=>{e.removeAttribute("data-focus-trap");let i=e.getElementsByClassName("sentinel");for(;i.length>0;)i[0].remove();let o=s.findIndex(t=>t.container===e);o>=0&&s.splice(o,1),function(){let e=s.pop();e&&t(e.container,e.initialFocus,e.originalSignal)}()}),document.addEventListener("focus",t=>{h(t.target)},{signal:p.signal,capture:!0}),h(document.activeElement),o={container:e,controller:p,initialFocus:i,originalSignal:u};let m=s.findIndex(t=>t.container===e);if(m>=0&&s.splice(m,1),!r)return l}});var n=i(78160);(0,i(44542).O)();let s=[]},47142:(t,e,i)=>{i.d(e,{CD:()=>l,DU:()=>n,Gs:()=>r,m7:()=>a});var o=-1/0,n=1/0;function s(t,e,i,n){for(var s=t.length,r=e.length,a=t.toLowerCase(),l=e.toLowerCase(),u=function(t){for(var e=t.length,i=Array(e),o="/",n=0;n<e;n++){var s,r=t[n];"/"===o?i[n]=.9:"-"===o||"_"===o||" "===o?i[n]=.8:"."===o?i[n]=.6:(s=o).toLowerCase()===s&&r.toUpperCase()===r?i[n]=.7:i[n]=0,o=r}return i}(e,u),c=0;c<s;c++){i[c]=Array(r),n[c]=Array(r);for(var d=o,h=c===s-1?-.005:-.01,p=0;p<r;p++)if(a[c]===l[p]){var m=o;c?p&&(m=Math.max(n[c-1][p-1]+u[p],i[c-1][p-1]+1)):m=-.005*p+u[p],i[c][p]=m,n[c][p]=d=Math.max(m,d+h)}else i[c][p]=o,n[c][p]=d+=h}}function r(t,e){var i=t.length,r=e.length;if(!i||!r)return o;if(i===r)return n;if(r>1024)return o;var a=Array(i),l=Array(i);return s(t,e,a,l),l[i-1][r-1]}function a(t,e){var i=t.length,n=e.length,r=Array(i);if(!i||!n)return r;if(i===n){for(var a=0;a<i;a++)r[a]=a;return r}if(n>1024)return r;var l=Array(i),u=Array(i);s(t,e,l,u);for(var c=!1,a=i-1,d=n-1;a>=0;a--)for(;d>=0;d--)if(l[a][d]!==o&&(c||l[a][d]===u[a][d])){c=a&&d&&u[a][d]===l[a-1][d-1]+1,r[a]=d--;break}return r}function l(t,e){t=t.toLowerCase(),e=e.toLowerCase();for(var i=t.length,o=0,n=0;o<i;o+=1)if(0===(n=e.indexOf(t[o],n)+1))return!1;return!0}},5650:(t,e,i)=>{let o;var n=i(83833),s=i(36071),r=i(65935);async function a(t,e){let i=await e.html(),o=t.closest(".js-nested-comment-container");o?.classList.contains("color-bg-success")?(o.classList.remove("color-bg-success"),o.classList.remove("timeline-child-comment-answer-border")):(o?.classList.add("color-bg-success"),o?.classList.add("timeline-child-comment-answer-border"));let n=t,s=t.closest("[data-replace-remote-form-target]");if(s){let t=s.getAttribute("data-replace-remote-form-target");n=t?document.getElementById(t):s}n.replaceWith(i.html)}(0,s.N7)(".js-discussions-goto-answer-button",{add:t=>{try{let e=t.getAttribute("href"),i=document.querySelector(e);i&&(0,n.RB)(t,"click",t=>{if(e){t.preventDefault();let e="center";i.getBoundingClientRect().height>=window.innerHeight&&(e="start"),i.scrollIntoView({behavior:"smooth",block:e});let o=i.querySelector(".js-targetable-element");o&&(o.tabIndex=0,o.focus({preventScroll:!0}))}},{capture:!0})}catch(t){if(t instanceof DOMException);else throw t}}}),(0,s.N7)(".js-discussions-title-container",{add:t=>{t.querySelector(".js-discussions-goto-answer-button")?function(){let t=document.querySelector(".js-discussion");t&&t.classList.add("answered")}():function(){let t=document.querySelector(".js-discussion");t&&t.classList.remove("answered")}()}}),(0,r.AC)(".js-discussion-comment-mark-answer",async function(t,e){await a(t,e)}),(0,r.AC)(".js-discussion-comment-unmark-answer",async function(t,e){await a(t,e)});var l=i(48858),u=i(59753);window.addEventListener("action-menu-item-toggle",function(t){let e;if(!(t instanceof CustomEvent))return;let i=t.detail.item,o=t.detail.action;if(!(i instanceof HTMLElement))return;let n=i.parentElement;n instanceof HTMLElement&&(e="expanded"===o?{category:"discussion_section",action:"collapse",label:"discussion_section_collapsed"}:{category:"discussion_section",action:"expand",label:"discussion_section_expanded"},n.setAttribute("data-analytics-event",JSON.stringify(e)))}),(0,u.on)("click",".js-discussion-category-emoji-button",function(t){if(!(t.currentTarget instanceof HTMLButtonElement))return;let e=t.currentTarget.closest(".js-discussion-category-form");for(let i of(e.querySelector(".js-discussion-category-emoji-field").value=t.currentTarget.value,e.querySelector(".js-discussion-category-custom-emoji").innerHTML=t.currentTarget.innerHTML,e.querySelectorAll(".selected-emoji")))i.classList.remove("selected-emoji");t.currentTarget.classList.add("selected-emoji"),e.querySelector(".js-discussion-category-emoji-picker")?.hidePopover()});let c=new WeakMap;(0,u.on)("toggle",".js-discussion-category-emoji-picker",function(t){let{newState:e,currentTarget:i}=t;if(!(i instanceof HTMLElement))return;let o=i.querySelector("emoji-picker");switch(e){case"open":c.set(i,(0,l.e)(i)),o&&o.open();break;case"closed":c.get(i)?.abort(),c.delete(i),o&&o.close()}},{capture:!0}),(0,u.on)("click",".js-announcement-radio-button",function(t){let e=t.currentTarget.closest(".js-category-container"),i=e.getAttribute("data-category-id");if("false"===e.getAttribute("data-supports-announcements")){let t=document.getElementById(`${i}-announcement-warning`);t&&t.removeAttribute("hidden");let e=document.getElementById(`${i}-mark-as-answer-warning`);e&&e.setAttribute("hidden","true")}}),(0,u.on)("click",".js-mark-as-answer-radio-button",function(t){let e=t.currentTarget.closest(".js-category-container").getAttribute("data-category-id"),i=document.getElementById(`${e}-mark-as-answer-warning`);i&&i.setAttribute("hidden","true");let o=document.getElementById(`${e}-announcement-warning`);o&&o.setAttribute("hidden","true")}),(0,u.on)("click",".js-open-ended-radio-button",function(t){let e=t.currentTarget,i=t.currentTarget.closest(".js-category-container"),o=i.getAttribute("data-category-id"),n=e.value,s="false"===i.getAttribute("data-supports-mark-as-answer")&&"false"===i.getAttribute("data-supports-announcements");if("true"===i.getAttribute("data-supports-mark-as-answer")){let t=document.getElementById(`${o}-mark-as-answer-warning`);t&&"mark_as_answer"!==n&&(t.removeAttribute("hidden"),document.getElementById(`${o}-announcement-warning`).setAttribute("hidden","true"))}if(s){let t=document.getElementById(`${o}-announcement-warning`);t&&t.setAttribute("hidden","true");let e=document.getElementById(`${o}-mark-as-answer-warning`);e&&e.setAttribute("hidden","true")}}),(0,u.on)("click",".js-poll-option-template-button",function(t){let e=t.currentTarget.parentElement,i=e.querySelector(".js-poll-option-destroy-field"),o=e.closest(".js-discussion-poll-form-component");i?(i.value="true",i.nextElementSibling?.classList.remove("js-poll-option"),e.hidden=!0):e.remove();let n=document.querySelector(".js-add-poll-option");n?.hidden&&(n.hidden=!1,n.setAttribute("aria-hidden","false")),o&&(0,u.f)(o,"pollOptionRemoved")}),(0,u.on)("click",".js-add-poll-option",function(t){let e=t.currentTarget,i=document.querySelector("#poll-option-container"),o=+i.getAttribute("data-poll-options-limit"),n=document.querySelector(".js-poll-option-template"),s="true"===i.getAttribute("data-new-discussion");if(i&&n){let t=n.cloneNode(!0);t.hidden=!1;let e=t.querySelector(".js-poll-option-template-input");if(s)e.name="discussion[poll_attributes][options_attributes][][option]";else{let t=i.getAttribute("data-poll-option-next-key");e.name=`discussion[poll_attributes][options_attributes][${t}][option]`,i.setAttribute("data-poll-option-next-key",`${parseInt(t)+1}`)}i.appendChild(t)}let r=i.querySelectorAll(".js-poll-option").length;e&&r>=o&&(e.hidden=!0,e.setAttribute("aria-hidden","true"))}),(0,u.on)("change","#js-discussion-title",function(t){let e=t.currentTarget,i=document.querySelector("#js-similar-search-link");if(i instanceof HTMLAnchorElement&&e instanceof HTMLInputElement){let t=new URL(i.getAttribute("data-path"),window.location.origin);t.searchParams.set("discussions_q",e.value),i.href=t.toString()}});var d=i(76006),h=i(69567);function p(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r}let m=class CommentActionsContainerElement extends HTMLElement{displayDialog(t){let e=t.currentTarget,i=e.getAttribute("data-dialog-id");this.dialogContainer.querySelector(`#${i}`)||this.createDialog(i,e),this.showDialog(i)}createDialog(t,e){let i=e.getAttribute("data-title"),o=e.getAttribute("data-src"),n=e.getAttribute("data-size"),s=new h.R(this.dialogTemplate,{title:i,dialogId:t,src:o});if(this.dialogContainer.append(s),n){let e=this.querySelector(`#${t}`);e.classList.remove("Overlay--size-medium"),e.classList.add(`Overlay--size-${n}`)}}showDialog(t){let e=this.querySelector(`#${t}`);e&&e.showModal()}};p([d.fA],m.prototype,"dialogTemplate",void 0),p([d.fA],m.prototype,"dialogContainer",void 0),m=p([d.Ih],m);var f=i(9238),g=i(97390);async function y(t){let e=t.closest(".js-comment");if(!e)return;let i=C(e);if(i){if(i.querySelector(".js-preview-body"))return;let t=i.getAttribute("data-permissions-url"),o=S(i).targetType;t&&o&&await b(t,o)&&(j(e),E(e))}}async function b(t,e){let i=await fetch(t,{headers:{Accept:"application/json"}});return(await i.json())[e].update}function v(t){let e=t.currentTarget.closest(".js-comment");j(e),E(e),function(t){let e=t.querySelector(".js-discussions-poll-edit-placeholder");if(e){let t=e.getAttribute("data-poll-edit-url");if(""===t)return;x("template.js-discussions-poll-edit-template",e,{pollEditUrl:t})}}(e)}function w(t){let e=t.currentTarget.closest(".js-comment");if(e){let t=e.querySelector(".js-discussion-poll-form-component");t&&function(t,e){let i=C(t);"true"===i.getAttribute("data-poll-confirmation")!==e&&(e?(!function(t){let e=R(t);e&&x("template.js-discussions-poll-confirmation-template",e,{})}(t),i.setAttribute("data-poll-confirmation","true")):(A(t,S(i)),i.setAttribute("data-poll-confirmation","false")))}(e,(0,g.T)(t))}}function E(t){let e=t.querySelector(".js-discussions-markdown-toolbar-placeholder:last-child");if(e){let t={textareaId:e.getAttribute("data-textarea-id")};x("template.js-discussions-markdown-toolbar-template",e,t)}}function j(t){let e=C(t);if(e){let i=S(e);x("template.js-discussions-edit-form-template",e,i),A(t,i)}}function A(t,e){let i=R(t);i&&x("template.js-discussions-edit-actions-template",i,e)}function C(t){return t.querySelector(".js-edit-comment-form-container")}function R(t){return t.querySelector(".js-discussions-edit-form-actions")}function S(t){return{bodyVersion:t.getAttribute("data-body-version"),outerDivClasses:t.getAttribute("data-outer-div-classes"),repositoryId:t.getAttribute("data-repository-id"),targetBody:t.getAttribute("data-target-body"),targetType:t.getAttribute("data-target-type"),textareaId:t.getAttribute("data-textarea-id"),slashCommandUrl:t.getAttribute("data-slash-command-url"),pollEditUrl:t.getAttribute("data-poll-edit-url")}}function x(t,e,i){let o=document.querySelector(t);o&&(e.textContent="",e.appendChild(new h.R(o,i)))}function q(t){let e=t.currentTarget;if(e){let t=new k(e);setTimeout(()=>{t.render()},1)}}(0,s.N7)(".js-discussions-comment-edit-button",{subscribe:t=>(0,n.RB)(t,"click",v,{capture:!1,once:!0})}),(0,s.N7)(".js-task-list-container .contains-task-list",{add:async t=>y(t)}),(0,s.N7)(".js-discussion-poll-form-component",{subscribe:t=>(0,n.RB)(t,"pollOptionRemoved",w)}),(0,f.w4)("keyup",".js-discussion-poll-form-component input",w),(0,s.N7)(".js-optimistic-reaction-render-button",{subscribe:t=>(0,n.RB)(t,"click",q,{capture:!1})});let k=class OptimisticReactionRenderer{render(){if(!this.isReactionAlreadyRendered)return this.addNewReactionGroup();this.isAddingReaction?this.addReactionToGroup():this.removeReactionFromGroup()}addReactionToGroup(){this.existingReactionGroupCountContainer&&this.existingReactionGroup&&(this.existingReactionGroup.removeAttribute("hidden"),this.existingReactionGroup.classList.add("user-has-reacted"),this.existingReactionGroupCountContainer.textContent=`${this.existingReactionGroupCount+1}`,this.addReactionToPopoverReactionButtons())}focusOnAdjacentReaction(){let t,e;let i=t=>{let e=parseInt(t.getAttribute("data-button-index-position")||"");return isNaN(e)?null:e};if(!this.existingReactionGroup)return;let o=i(this.existingReactionGroup);if(o){for(let n of this.reactionGroupsContainer.querySelectorAll("button").values()){let s=i(n);if(!s)return;if(s<o&&(t=n),s>o){e=n;break}}e?e.focus():t&&t.focus()}}removeReactionFromGroup(){1===this.existingReactionGroupCount&&(this.existingReactionGroup.setAttribute("hidden",""),this.focusOnAdjacentReaction()),this.existingReactionGroupCountContainer.textContent=`${this.existingReactionGroupCount-1}`,this.existingReactionGroup?.classList.remove("user-has-reacted"),this.removeReactionFromPopoverReactionButtons()}addNewReactionGroup(){let t=this.newEmojiButtonFromTemplate();this.newEmojiButtonTemplateContainer&&t&&this.commentReactionsContainer&&(this.nextButtonGroup?this.reactionGroupsContainer.insertBefore(t,this.nextButtonGroup):this.reactionGroupsContainer.append(t),t.classList.add(this.tooltipPositionClass),this.addReactionToPopoverReactionButtons(),t.focus(),this.commentReactionsContainer.classList.contains("d-md-none")&&this.commentReactionsContainer.classList.add("has-reactions"))}newEmojiButtonFromTemplate(){if(this.newEmojiButtonTemplateContainer){let t=this.newEmojiButtonTemplateContainer.content.querySelector(".js-reaction-group-button");if(t)return t.cloneNode(!0)}}get nextButtonGroup(){if(void 0!==this.newEmojiButtonFromTemplatePosition&&null!==this.newEmojiButtonFromTemplatePosition){for(let t of this.reactionGroupsContainer.children)if(Number(t.getAttribute("data-button-index-position"))>this.newEmojiButtonFromTemplatePosition)return t}}get commentContainer(){return this.clickedReactionButton.closest(".js-comment")}get buttonsContainer(){return this.commentContainer.querySelector(".js-reaction-buttons-container")}get reactionContent(){return this.clickedReactionButton.getAttribute("data-reaction-content")}get reactionGroup(){return this.buttonsContainer.querySelector(`.js-comment-reactions-options g-emoji[alias='${this.reactionContent}'`)}get existingReactionGroup(){if(this.reactionGroup)return this.reactionGroup.closest(".js-reaction-group-button")}get existingReactionGroupCountContainer(){if(this.existingReactionGroup)return this.existingReactionGroup.querySelector(".js-discussion-reaction-group-count")}get newEmojiButtonTemplateContainer(){return document.getElementById(`emoji-reaction-button-template-${this.reactionContent}`)}get commentReactionsContainer(){return this.buttonsContainer.closest(".js-reaction-buttons-container")}get reactionGroupsContainer(){return this.buttonsContainer.querySelector(".js-comment-reactions-options")}get isReactionAlreadyRendered(){return!!this.reactionGroup}get isAddingReaction(){if(this.existingReactionGroup)return!this.existingReactionGroup.classList.contains("user-has-reacted")}get existingReactionGroupCount(){return this.existingReactionGroupCountContainer?Number(this.existingReactionGroupCountContainer.innerHTML):0}get newEmojiButtonFromTemplatePosition(){let t=this.newEmojiButtonFromTemplate();if(t)return Number(t.getAttribute("data-button-index-position"))}get tooltipPositionClass(){return this.buttonsContainer.querySelectorAll("button").length>1?"tooltipped-s":"tooltipped-se"}addReactionToPopoverReactionButtons(){for(let t of this.commentContainer.querySelectorAll(".js-add-reaction-popover")){let e=t.querySelector(`button[data-reaction-content="${this.reactionContent}"]`);e.classList.add("user-has-reacted"),e.value.match(/unreact/)||(e.value=e.value.replace(/react/,"unreact")),e.setAttribute("aria-checked","true")}}removeReactionFromPopoverReactionButtons(){for(let t of this.commentContainer.querySelectorAll(".js-add-reaction-popover")){let e=t.querySelector(`button[data-reaction-content="${this.reactionContent}"]`);e.classList.remove("user-has-reacted"),e.value.match(/unreact/)&&(e.value=e.value.replace(/unreact/,"react")),e.setAttribute("aria-checked","false")}}constructor(t){this.clickedReactionButton=t}};var L=i(43467),T=i(96462);function B(t,e){let i=t.closest(".js-timeline-discussion-comment"),o=i.querySelector(".js-discussions-previewable-comment-form-container");if(!o)return;let n=o.getAttribute("data-parent-comment-id"),s=o.getAttribute("data-anchor-id"),r=o.getAttribute("data-back-page"),a=document.querySelector("template.js-new-comment-template");n&&a&&!o.querySelector(".js-discussion-comment-form")&&(o.textContent="",o.appendChild(new h.R(a,{id:n,anchorId:s,backPage:r}))),e.willFocus&&(0,L.j)(i)}(0,s.N7)(".js-inline-comment-form-container",{add:t=>(function(t){let e=t.closest(".discussion-timeline-item.js-comment-container");e&&"true"===e.getAttribute("data-open-edit-form-after-load")&&(e.setAttribute("data-open-edit-form-after-load","false"),B(t,{willFocus:!0}))})(t)}),(0,u.on)("click",".js-discussions-previewable-comment-form",function({currentTarget:t}){B(t,{willFocus:!0}),(0,T.m)()}),(0,u.on)("quote-selection",".js-discussion-quote-selection",function(t){let e=t.detail,i=e.closest(".js-timeline-discussion-comment");if(!i)return;let o=e.range;B(i,{willFocus:!0}),e.range=o}),(0,r.AC)(".js-discussions-previewable-comment-form-container .js-discussion-comment-form",async function(t,e){await e.text(),(0,L.w)(t);let i=t.closest(".js-discussions-previewable-comment-form-container");i.querySelector(".js-comment-form-error")?.classList.add("d-none")});var F=i(15205),_=i(47142),P=i(94437);async function I(t){let e=await fetch(t,{headers:{Accept:"application/json"}});return e.ok?await e.json():void 0}let G=new Map,O=(0,F.Z)(I,{cache:G});function D(){return document.querySelector("query-builder#query-builder-discussions-search-combobox")}async function N(){return O(D().getAttribute("data-suggestable-authors-path"))}async function $(){return JSON.parse(D().getAttribute("data-suggestable-categories"))}async function M(){return O(D().getAttribute("data-suggestable-labels-path"))}let Q=async()=>await N(),H=async()=>await $(),U=async()=>await M(),V=["open","closed","answered","unanswered","locked","unlocked"],z=document.querySelector("#discussions-search-combobox-form")?.getAttribute("action")||"",X=(t,e)=>t.filter(t=>{if(e&&(0,_.CD)(e,t)||""===e)return t}),W=class SearchItemProvider extends EventTarget{handleEvent(t){""!==String(t)&&this.dispatchEvent(new P.T2({priority:1,value:t.toString(),icon:P.zi.Search,scope:"GENERAL",action:{url:`${z}?discussions_q=${t.toString()}`}}))}constructor(t){super(),this.queryBuilder=t,this.priority=1,this.name="Search",this.singularItemName="search item",this.value="search",this.type="search",this.queryBuilder.addEventListener("query",this),this.queryBuilder.attachProvider(this)}},Y=class AuthorProvider extends EventTarget{async handleEvent(t){let e=t.parsedQuery.at(-1),i=e?.value||"",o=e?.type,n=e?.filter||"";if("filter"!==o&&((0,_.CD)(i,this.value)||""===i)&&this.dispatchEvent(new Event("show")),"filter"===o&&n===this.value)for(let t of X((await Q()).map(t=>t.value),i).slice(0,5))this.dispatchEvent(new P.L2({filter:"author",value:t}))}constructor(t){super(),this.queryBuilder=t,this.name="Authors",this.singularItemName="author",this.value="author",this.priority=2,this.type="filter",this.queryBuilder.addEventListener("query",this),this.queryBuilder.attachProvider(this)}},Z=class CategoryProvider extends EventTarget{async handleEvent(t){let e=t.parsedQuery.at(-1),i=e?.value||"",o=e?.type,n=e?.filter||"";if("filter"!==o&&((0,_.CD)(i,this.value)||""===i)&&this.dispatchEvent(new Event("show")),"filter"===o&&n===this.value)for(let t of X((await H()).map(t=>t.value?.replace(/"/g,"")),i))this.dispatchEvent(new P.L2({filter:"category",value:t}))}constructor(t){super(),this.queryBuilder=t,this.name="Categories",this.singularItemName="category",this.value="category",this.priority=3,this.type="filter",this.queryBuilder.addEventListener("query",this),this.queryBuilder.attachProvider(this)}},J=class StateProvider extends EventTarget{handleEvent(t){let e=t.parsedQuery.at(-1),i=e?.value||"",o=e?.type,n=e?.filter||"",s=X(V,i);if("filter"!==o&&((0,_.CD)(i,this.value)||""===i)&&this.dispatchEvent(new Event("show")),"filter"===o&&n===this.value)for(let t of s)this.dispatchEvent(new P.L2({filter:"is",value:t}))}constructor(t){super(),this.queryBuilder=t,this.name="States",this.singularItemName="state",this.value="is",this.priority=4,this.type="filter",this.queryBuilder.addEventListener("query",this),this.queryBuilder.attachProvider(this)}},K=class LabelProvider extends EventTarget{async handleEvent(t){let e=t.parsedQuery.at(-1),i=e?.value||"",o=e?.type,n=e?.filter||"";if("filter"!==o&&((0,_.CD)(i,this.value)||""===i)&&this.dispatchEvent(new Event("show")),"filter"!==o||n!==this.value)return;let s=(await U()).map(t=>t.value);for(let t of(0===s.length&&(s=this.defaultLabels),X(s,i)))this.dispatchEvent(new P.L2({filter:"label",value:t}))}constructor(t){super(),this.queryBuilder=t,this.name="Labels",this.singularItemName="label",this.value="label",this.priority=5,this.type="filter",this.defaultLabels=["bug","documentation","duplicate","enhancement","good first issue","help wanted","invalid","question","wontfix"],this.queryBuilder.addEventListener("query",this),this.queryBuilder.attachProvider(this)}};document.addEventListener("query-builder:request-provider",t=>{new W(t.target),new Y(t.target),new Z(t.target),new J(t.target),new K(t.target)});var tt=i(77789);function te(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r}(0,s.N7)(".js-confetti-party",()=>{(0,tt.Z)()});let ti=class DiscussionSpotlightPreviewElement extends HTMLElement{updatePreview(t){let e=t.currentTarget.getAttribute("style");this.spotlightElement.setAttribute("style",e)}};function to(t,e,i,o){var n,s=arguments.length,r=s<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(r=(s<3?n(r):s>3?n(e,i,r):n(e,i))||r);return s>3&&r&&Object.defineProperty(e,i,r),r}te([d.fA],ti.prototype,"spotlightElement",void 0),ti=te([d.Ih],ti),(0,r.AC)(".js-spotlight-notice-dismiss",async function(t,e){await e.text(),t.closest(".js-notice").remove(),document.querySelector(".js-discussions-categories")&&document.querySelector(".js-discussions-categories").classList.remove("v-hidden")});let tn=class DiscussionSpotlightContainerElement extends HTMLElement{openDiscussionLink(){window.getSelection().toString()||this.mainLink.click()}};to([d.fA],tn.prototype,"mainLink",void 0),tn=to([d.Ih],tn),(0,u.on)("click",".js-discussion-comment-thread-expand-button",function({currentTarget:t}){let e=t.closest(".discussion-timeline-item.js-comment-container");e&&function(t){let e=t.querySelector(".js-inline-comment-form-container");return!!e&&e.classList.contains("open")}(e)&&e.setAttribute("data-open-edit-form-after-load","true")}),(0,s.N7)(".js-remove-error-state-on-click > details",{add:t=>(function(t){let e=document.getElementById("discussion_category_id")?.getAttribute("value");if(!e)return;let i=t.querySelector(`.discussion-category-${e}`);i&&i.click()})(t)}),i(27280);var ts=i(5223);let tr=async(t,e,i,o)=>{let n=new FormData;for(let t of(n.append("question",i),o))n.append("options[]",t);return await fetch(t,{body:n,method:"POST",mode:"same-origin",headers:{"Scoped-CSRF-Token":e}})},ta=class PollFormElement{hide(){this.pollForm.hidden=!0,this.pollForm?.setAttribute("aria-hidden","true")}show(){this.pollForm.hidden=!1,this.pollForm?.setAttribute("aria-hidden","false")}getCsrfInputValue(){let t=this.pollForm.querySelector(".js-poll-preview-url-post-csrf");return t?t.value:""}getOptions(){let t=[],e=this.pollForm.querySelector("#poll-option-container");if(!e)return t;for(let i of e.querySelectorAll(".js-poll-option"))i.value&&t.push(i.value);return t}getQuestion(){let t=this.pollForm.querySelector(".js-poll-form-input-question");return t?t.value:""}constructor(t){this.pollForm=t,this.pollPreviewUrl=this.pollForm.getAttribute("data-poll-preview-url")||""}},tl=class Poll{hidePollForm(){this.pollFormElement.hide()}showPollForm(){this.pollFormElement.show()}async getPreview(){let t=this.pollFormElement.getQuestion(),e=this.pollFormElement.getOptions();if(t&&e.length>0){let i=await tr(this.pollFormElement.pollPreviewUrl,this.pollFormElement.getCsrfInputValue(),t,e);return await i.text()}return""}constructor(t){this.pollFormElement=t}};(0,s.N7)(".js-discussion-poll-form-component",t=>{o=new tl(new ta(t))}),(0,u.on)("preview:rendered",".js-previewable-comment-form",async function(t){if(!o)return;let e=t.currentTarget.querySelector(".comment-body"),i=await o.getPreview();e.append((0,ts.r)(document,i)),o.hidePollForm()}),(0,u.on)("poll-preview:toggle:off",".js-discussion-poll-form-component",async function(){o&&o.showPollForm()});let tu=async(t,e,i)=>{let o=new FormData;return o.append("option_id",i),await fetch(t,{body:o,method:"POST",mode:"same-origin",headers:{"Scoped-CSRF-Token":e}})},tc=class PollOptionsElement{checkedValue(){let t=this.optionsElement?.querySelector(".js-discussion-poll-option:checked");return t?.value}hide(){this.optionsElement&&(this.optionsElement.hidden=!0),this.optionsElement?.setAttribute("aria-hidden","true")}show(){this.optionsElement&&(this.optionsElement.hidden=!1),this.optionsElement?.setAttribute("aria-hidden","false")}constructor(t){this.optionsElement=t}},td=class PollResultsElement{hide(){this.resultsElement&&(this.resultsElement.hidden=!0),this.resultsElement?.setAttribute("aria-hidden","true")}show(){this.resultsElement&&(this.resultsElement.hidden=!1),this.resultsElement?.setAttribute("aria-hidden","false")}constructor(t){this.resultsElement=t}},th=class PollFormElement{getCsrfInputValue(){let t=this.pollForm.querySelector(".js-data-url-post-csrf");return t?t.value:""}hideResults(){this.resultsElement.hide(),this.optionsElement.show(),this.hideResultsButton&&(this.hideResultsButton.hidden=!0),this.hideResultsButton?.setAttribute("aria-hidden","true"),this.showResultsButton&&(this.showResultsButton.hidden=!1),this.showResultsButton?.setAttribute("aria-hidden","false"),"true"===this.pollLocked?this.voteButton?.setAttribute("aria-disabled","true"):this.voteButton?.setAttribute("aria-disabled","false"),this.pollQuestion&&(this.pollQuestion.textContent&&(this.pollQuestion.textContent=this.pollQuestion.textContent.replace("Results: ","")),this.pollQuestion.focus())}showResults(){this.resultsElement.show(),this.optionsElement.hide(),this.hideResultsButton&&(this.hideResultsButton.hidden=!1),this.hideResultsButton?.setAttribute("aria-hidden","false"),this.showResultsButton&&(this.showResultsButton.hidden=!0),this.showResultsButton?.setAttribute("aria-hidden","true"),this.voteButton?.setAttribute("aria-disabled","true"),this.pollQuestion&&(this.pollQuestion.textContent=`Results: ${this.pollQuestion.textContent}`,this.pollQuestion.focus())}constructor(t){this.pollForm=t,this.resultsElement=new td(t.querySelector(".js-discussion-poll-results")),this.optionsElement=new tc(t.querySelector(".js-discussion-poll-options")),this.hideResultsButton=t.querySelector(".js-poll-hide-results"),this.showResultsButton=t.querySelector(".js-poll-show-results"),this.voteButton=t.querySelector(".js-discussion-poll-vote-button"),this.voteUrl=this.pollForm.getAttribute("data-vote-url")||"",this.pollUrl=this.pollForm.getAttribute("data-poll-url")||"",this.pollLocked=this.pollForm.getAttribute("data-poll-locked")||"",this.pollQuestion=this.pollForm.querySelector("#poll-question")}},tp=class Poll{bindHideResultsClick(t){t?.addEventListener("click",async()=>{this.hideResults()})}bindShowResultsClick(t){t?.addEventListener("click",async()=>{this.showResults()})}bindVoteClick(t){t?.addEventListener("click",async()=>{this.vote()})}async vote(){let t=this.pollFormElement.optionsElement.checkedValue();if(t&&(await tu(this.pollFormElement.voteUrl,this.pollFormElement.getCsrfInputValue(),t)).ok)try{let t=await fetch(this.pollFormElement.pollUrl,{headers:{Accept:"text/html"}}),e=await t.text();this.pollFormElement.pollForm.replaceWith((0,ts.r)(document,e));let i=document.querySelector("#poll-question");i&&(i.textContent=`Results: ${i.textContent}`,i.focus())}catch{return}}hideResults(){this.pollFormElement.hideResults()}showResults(){this.pollFormElement.showResults()}constructor(t){this.pollFormElement=t,this.bindHideResultsClick(t.hideResultsButton),this.bindShowResultsClick(t.showResultsButton),this.bindVoteClick(t.voteButton)}};(0,s.N7)(".js-discussion-poll-component",t=>{new tp(new th(t))});var tm=i(87274);let tf=new IntersectionObserver(function(t){for(let e of t)e.isIntersecting&&(e.target.hidden=!0)},{root:null,rootMargin:"0px",threshold:.1});(0,s.N7)(".js-whats-new",t=>tf.observe(t)),(0,u.on)("click",".js-whats-new-state",t=>{(t.target?.parentNode).scrollIntoView({behavior:"smooth",block:"start"})});let tg=()=>{let t=document.querySelector(".js-whats-new-state");t&&(t.hidden=!1)};document.addEventListener("turbo:load",tg),async function(){await tm.x,setTimeout(tg,1e3)}()},77789:(t,e,i)=>{let o,n;i.d(e,{Z:()=>f});let s=Math.random,r=Math.cos,a=Math.sin,l=Math.PI,u=2*l,c=[],d=["#6a737d","#0366d6","#28a745","#ffd33d","#f66a0a","#6f42c1","#ea4aaa"];function h(){let t=Math.floor(Math.random()*d.length);return d[t]}let p=document.createElement("div");p.style.position="fixed",p.style.top="0",p.style.left="0",p.style.width="100%",p.style.height="0",p.style.overflow="visible",p.style.zIndex="9999";let m=class Confetto{update(t,e){var i,o;this.frame+=e,this.x+=this.dx*e,this.y+=this.dy*e,this.theta+=this.dTheta*e;let n=this.frame%7777/7777,s=0,c=1;for(;n>=this.splineX[c];)s=c++;let d=(i=this.splineY[s],o=this.splineY[c],(1-r(l*((n-this.splineX[s])/(this.splineX[c]-this.splineX[s]))))/2*(o-i)+i);return n*=u,this.inner.style.transform=`${this.axis}${this.theta}deg)`,this.outer.style.left=`${this.x+d*r(n)}px`,this.outer.style.top=`${this.y+d*a(n)}px`,this.y>t+100}constructor(t){this.frame=0,this.outer=document.createElement("div"),this.inner=document.createElement("div"),this.outer.appendChild(this.inner),this.outer.style.position="absolute",this.outer.style.width=`${3+9*s()}px`,this.outer.style.height=`${3+9*s()}px`,this.inner.style.width="100%",this.inner.style.height="100%",this.inner.style.backgroundColor=t(),this.outer.style.perspective="50px",this.outer.style.transform=`rotate(${360*s()}deg)`,this.theta=360*s(),this.axis=`rotate3D(${r(360*s())},${r(360*s())},0,`,this.inner.style.transform=`${this.axis}${this.theta}deg)`,this.dTheta=.4+.29999999999999993*s(),this.x=window.innerWidth*s(),this.y=-100,this.dx=a(-.1+.2*s()),this.dy=.13+.18*s(),this.outer.style.left=`${this.x}px`,this.outer.style.top=`${this.y}px`,this.splineX=function(){let t=[.1,.9],e=.8,i=[0,1];for(;e;){let o,n,r,a,l,u=e*s();for(o=0,n=t.length,e=0;o<n;o+=2){if(a=t[o],u<e+(r=(l=t[o+1])-a)){let t=u+a-e;i.push(t),u=t;break}e+=r}let c=u-.1,d=u+.1;for(o=t.length-1;o>0;o-=2)a=t[n=o-1],l=t[o],a>=c&&a<d?l>d?t[n]=d:t.splice(n,2):a<c&&l>c&&(l<=d?t[o]=c:t.splice(o,0,c,d));for(o=0,n=t.length,e=0;o<n;o+=2)e+=t[o+1]-t[o]}return i.sort()}(),this.splineY=[];let e=this.splineX.length-1;for(let t=1;t<e;++t)this.splineY[t]=100*s();this.splineY[0]=this.splineY[e]=100*s()}};function f(t){if(!n){let e;document.body.appendChild(p);let i=()=>{let t=new m(h);c.push(t),p.appendChild(t.outer),o=window.setTimeout(i,40*s())};i();let r=t=>{let i=e?t-e:0;e=t;let s=window.innerHeight;for(let t=c.length-1;t>=0;--t)c[t].update(s,i)&&(p.removeChild(c[t].outer),c.splice(t,1));if(o||c.length){n=requestAnimationFrame(r);return}document.body.removeChild(p),n=void 0};window.setTimeout(function(){clearTimeout(o),o=void 0},null==t?5e3:t),requestAnimationFrame(r)}}},96462:(t,e,i)=>{i.d(e,{m:()=>l});var o=i(407),n=i(46263),s=i(40033),r=i(36071);let a=(0,i(56363).Z)("localStorage",{ttl:3e5,throwQuotaErrorsOnSet:!1,sendCacheStats:!0}),l=()=>{(0,o.e6)((0,s.e)()),(0,o.e6)((0,s.e)(),{storage:a})},u=()=>{(0,o.Xm)((0,s.e)(),{selector:".js-session-resumable"}),(0,o.Xm)((0,s.e)(),{selector:".js-local-storage-resumable",storage:a})},c=(0,n.D)(function(){l()},50);window.addEventListener("submit",o.iO,{capture:!0}),window.addEventListener("pageshow",function(){l()}),(0,r.N7)(".js-session-resumable",function(){document.querySelector("html")?.hasAttribute("data-turbo-preview")||c()}),window.addEventListener("pagehide",function(){u()}),window.addEventListener("turbo:before-fetch-response",function(){u()}),window.addEventListener("turbo:load",function(){l()})},40033:(t,e,i)=>{i.d(e,{e:()=>o});function o(t){let e=t||window.location,i=document.head&&document.head.querySelector("meta[name=session-resume-id]");return i instanceof HTMLMetaElement&&i.content||e.pathname}},94437:(t,e,i)=>{var o,n,s,r;i.d(e,{Fi:()=>o,Ju:()=>l,L2:()=>FilterItem,T2:()=>SearchItem,UK:()=>QueryEvent,Z:()=>FetchDataEvent,gC:()=>s,i:()=>a,tj:()=>r,zi:()=>n}),function(t){t.DIRECTORY="Search in this directory",t.ORG="Search in this organization",t.OWNER="Search in this owner",t.REPO="Search in this repository",t.GITHUB="Search all of GitHub",t.GENERAL="Submit search",t.COMMAND="Run command",t.COPILOT="Ask Copilot",t.EXPLORE="Learn More",t.DEFAULT="Jump to"}(o||(o={}));let a="Autocomplete";let FilterItem=class FilterItem extends Event{constructor({filter:t,value:e,name:i="",description:o="",inlineDescription:n=!1,priority:s=1/0,icon:r,avatar:a,action:l}){super("filter-item"),this.inlineDescription=!1,this.filter=t,this.value=e,this.name=i,this.description=o,this.inlineDescription=n,this.priority=s,this.icon=r,this.avatar=a,this.action=l}};function l(t){return t instanceof Object}!function(t){t.Apps="apps",t.Archived="archived",t.Book="book",t.Bookmark="bookmark",t.Branch="branch",t.Calendar="calendar",t.Circle="circle",t.Code="code",t.CodeReview="code-review",t.CodeSquare="code-square",t.Comment="comment",t.CommentDiscussion="comment-discussion",t.Copilot="copilot",t.Codespaces="codespaces",t.CreditCard="credit-card",t.Default="default",t.DeviceDesktop="device-desktop",t.DeviceMobile="device-mobile",t.Discussion="discussion",t.Draft="draft",t.FileCode="file-code",t.Filter="filter",t.Forbidden="forbidden",t.Gift="gift",t.Globe="globe",t.Heart="heart",t.History="history",t.Issue="issue",t.IssueOpened="issue-opened",t.IssueClosed="issueClosed",t.Iterations="iterations",t.Mention="mention",t.Merged="merged",t.Milestone="milestone",t.No="no",t.Not="not",t.Organization="organization",t.Package="package",t.Pencil="pencil",t.Person="person",t.Play="play",t.PlusCircle="plus-circle",t.Project="project",t.PullRequest="pullRequest",t.Question="question",t.Reaction="reaction",t.Repo="repo",t.Rocket="rocket",t.Search="search",t.Server="server",t.ShieldCheck="shield-check",t.SingleSelect="single-select",t.Sort="sort",t.Tag="tag",t.Team="team",t.Telescope="telescope",t.Trash="trash",t.Workflow="workflow"}(n||(n={})),function(t){t.Entity="--color-prettylights-syntax-entity",t.Constant="--color-prettylights-syntax-constant",t.Keyword="--color-prettylights-syntax-keyword",t.Variable="--color-prettylights-syntax-variable",t.String="--color-prettylights-syntax-string"}(s||(s={}));let SearchItem=class SearchItem extends Event{constructor({priority:t,value:e,action:i,description:o="",icon:n,scope:s="DEFAULT",prefixText:r,prefixColor:a,isFallbackSuggestion:l}){super("search-item"),this.priority=t,this.value=e,this.prefixText=r,this.prefixColor=a,this.action=i,this.description=o,this.icon=n,this.scope=s,this.isFallbackSuggestion=l||!1}};!function(t){t.Normal="normal",t.Entity="entity",t.Constant="constant",t.FilterValue="filter-value"}(r||(r={}));let FetchDataEvent=class FetchDataEvent extends Event{constructor(t){super("fetch-data"),this.fetchPromise=t}};let QueryEvent=class QueryEvent extends Event{toString(){return this.rawQuery}constructor(t,e,i){super("query"),this.parsedQuery=t,this.rawQuery=e,this.parsedMetadata=i}}},83833:(t,e,i)=>{i.d(e,{RB:()=>o,qC:()=>n,w0:()=>Subscription});let Subscription=class Subscription{constructor(t){this.closed=!1,this.unsubscribe=()=>{t(),this.closed=!0}}};function o(t,e,i,o={capture:!1}){return t.addEventListener(e,i,o),new Subscription(()=>{t.removeEventListener(e,i,o)})}function n(...t){return new Subscription(()=>{for(let e of t)e.unsubscribe()})}},15205:(t,e,i)=>{function o(...t){return JSON.stringify(t,(t,e)=>"object"==typeof e?e:String(e))}function n(t,e={}){let{hash:i=o,cache:n=new Map}=e;return function(...e){let o=i.apply(this,e);if(n.has(o))return n.get(o);let s=t.apply(this,e);return s instanceof Promise&&(s=s.catch(t=>{throw n.delete(o),t})),n.set(o,s),s}}i.d(e,{Z:()=>n})}},t=>{var e=e=>t(t.s=e);t.O(0,["vendors-node_modules_dompurify_dist_purify_js","vendors-node_modules_github_selector-observer_dist_index_esm_js","vendors-node_modules_github_mini-throttle_dist_index_js-node_modules_github_remote-form_dist_-a07a15","vendors-node_modules_github_session-resume_dist_index_js-node_modules_primer_behaviors_dist_e-da6ec6","app_assets_modules_github_behaviors_inline-comment_ts-app_assets_modules_github_discussions_v-a47e26"],()=>e(5650)),t.O()}]);
//# sourceMappingURL=discussions-8a671f6591ce.js.map